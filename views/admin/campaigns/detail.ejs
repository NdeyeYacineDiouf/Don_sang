<%- include('../../adminLayout') %>

<div class="admin-campaign-detail">
  <h1><%= campaign.title %></h1>
  
  <div class="campaign-info">
    <p><strong>Statut :</strong> <%= campaign.status %></p>
    <p><strong>Dates :</strong> du <%= campaign.startDate.toLocaleDateString() %> au <%= campaign.endDate.toLocaleDateString() %></p>
    <p><strong>Lieu :</strong> <%= campaign.bloodBank.name %>, <%= campaign.bloodBank.location.address %></p>
  </div>

  <h2>Créneaux horaires</h2>
  <table class="admin-table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Heure</th>
        <th>Capacité</th>
        <th>Inscriptions</th>
      </tr>
    </thead>
    <tbody>
      <% campaign.timeSlots.forEach(slot => { %>
        <tr>
          <td><%= slot.date.toLocaleDateString() %></td>
          <td><%= slot.startTime %> - <%= slot.endTime %></td>
          <td><%= slot.maxDonors %></td>
          <td><%= slot.maxDonors - slot.availableSlots %> / <%= slot.maxDonors %></td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <div class="admin-actions">
    <a href="/admin/campaigns/<%= campaign._id %>/edit" class="btn btn-primary">Modifier</a>
    <form action="/admin/campaigns/<%= campaign._id %>?_method=DELETE" method="POST" style="display:inline;">
      <button type="submit" class="btn btn-danger" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette campagne ?')">Supprimer</button>
    </form>
  </div>
</div>